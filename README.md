# RND
研发UPD实验

我要做一个基于UDP协议的命令控制系统。
整个系统有两个局域网，分别是网1（网关：192.168.43.1）和网2（网关：192.168.99.1）。系统一共有3各功能模块，其中：
1）AirSight模块可以同时连接网1和网2，负责网1和网2间数据转发功能。
2）AirProbe模块部署在网1，负责发送网1的相关数据给AirSight。
3）DataStorage模块部署在网2，负责接收AirSight转发来自AirProbe所在网1的数据。

一、AirSight模块
功能1.1：在网1和网2均提供UDP广播服务，服务端口为：9999。广播服务命令有：
1）get_server_ip，反馈本机实际的IP地址；
2）get_mcast_server: 反馈本机UDP组播发送服务对应的IP地址和端口号；
3)get_mcast_clinet:反馈本机UDP组播接收服务对应的IP地址和端口号；
4）get_time，反馈本机当前的时间，精确到毫秒；
5）get_version，反馈本广播服务当前的命令版本号。
功能1.2：在网2提供UDP组播发送服务，组播服务器IP地址为：224.10.11.12，组播服务端口号为：8888。实现将g_data数据发送到组播端口，发送成功后清空g_data。
功能1.3：在网1提供UDP组播接收服务，组播服务器IP地址为：224.10.11.22，组播服务端口号为：7777。实现将接收到的数据保存到g_data。
功能1.4：g_data在被赋值时，要有加锁处理机制。如果需要获取g_data当前值，要等到这个锁解锁才能执行。
二、AirProbe模块
功能2.1：在网1中通过向9999端口号发送广播服务，获取响应的反馈信息：
1）发送"get_server_ip",获取AirSight模块所在服务器的IP地址；
2）发送"get_mcast_server"，获取AirSight模块"功能1.3"对应的UDP组播IP地址和端口号；
3) 发送"get_mcast_client",获取AirSight模块"功能1.2"对应的UDP组播IP地址和端口号；
4) 发送"get_time",获取AirSigth模块所在服务器的本地时间；
5) 发送"get_version"，获取AirSight模块广播服务当前的命令版本号。
功能2.2：在网1中实现UDP组播发送功能。根据"get_mcast_server"反馈IP地址和端口号，实现UPD组播发送数据功能，每隔3秒，向发送本机实际时间，精确到毫秒。
三、DataStorage模块
功能3.1：在网2中通过向9999端口号发送广播服务，获取响应的反馈信息：
1）发送"get_server_ip",获取AirSight模块所在服务器的IP地址；
2）发送"get_mcast_server"，获取AirSight模块"功能1.3"对应的UDP组播IP地址和端口号；
3) 发送"get_mcast_client",获取AirSight模块"功能1.2"对应的UDP组播IP地址和端口号；
4) 发送"get_time",获取AirSigth模块所在服务器的本地时间；
功能3.2：在网2中实现UDP组播接收功能，根据"get_mcast_client"反馈IP地址和端口号，实现UPD组播接收数据功能，将接收到的数据在屏幕上打印出来。


使用说明
网络配置：

确保AirSight服务器正确配置双网卡：

网1 IP：192.168.43.100

网2 IP：192.168.99.100

其他设备需要配置在对应网络的IP段

启动顺序：

先启动AirSight模块

启动DataStorage模块（网2）

最后启动AirProbe模块（网1）

功能验证：

AirProbe会每隔3秒发送时间数据

DataStorage应该能实时打印接收到的数据

所有模块都能通过广播命令查询服务器信息

注意事项：

需要关闭防火墙或配置防火墙规则允许UDP通信

确保网络设备支持组播

实际IP地址需要根据网络环境调整

这个系统实现了基于UDP的跨网络命令控制和数据转发功能，使用广播进行服务发现，组播进行高效数据传输，并通过锁机制保证数据一致性。


